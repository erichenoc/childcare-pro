@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   NEUMORPHISM DESIGN SYSTEM - ChildCare Pro
   Soft UI con sombras duales
   ============================================ */

@layer base {
  :root {
    /* ============================================
       COLORES BASE - MODO CLARO (Neumorphism)
       ============================================ */
    --background: 230 14% 92%; /* #e6e7ee */
    --foreground: 210 20% 20%;

    /* Neumorphism Light Mode */
    --neu-bg: #e6e7ee;
    --neu-shadow-dark: #b8b9be;
    --neu-shadow-light: #ffffff;

    /* Colores de marca - Azul principal */
    --primary: 217 91% 60%;
    --primary-foreground: 0 0% 100%;
    --secondary: 199 89% 48%;
    --secondary-foreground: 0 0% 100%;

    /* Estados */
    --success: 142 71% 45%;
    --warning: 38 92% 50%;
    --error: 0 84% 60%;
    --info: 217 91% 60%;

    /* Superficies */
    --card: 230 14% 92%;
    --card-foreground: 210 20% 20%;
    --muted: 230 10% 85%;
    --muted-foreground: 210 10% 45%;

    /* Bordes y anillos */
    --border: 230 10% 85%;
    --input: 230 10% 88%;
    --ring: 217 91% 60%;
  }

  .dark {
    /* ============================================
       COLORES BASE - MODO OSCURO (Neumorphism)
       ============================================ */
    --background: 0 0% 18%; /* #2d2d2d */
    --foreground: 0 0% 98%;

    /* Neumorphism Dark Mode */
    --neu-bg: #2d2d2d;
    --neu-shadow-dark: #1a1a1a;
    --neu-shadow-light: #404040;

    /* Superficies oscuras */
    --card: 0 0% 18%;
    --card-foreground: 0 0% 98%;
    --muted: 0 0% 22%;
    --muted-foreground: 0 0% 65%;

    /* Bordes oscuros */
    --border: 0 0% 25%;
    --input: 0 0% 22%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    @apply antialiased scroll-smooth;
  }

  body {
    @apply bg-background text-foreground;
    background-color: var(--neu-bg);
    font-feature-settings: "cv02", "cv03", "cv04", "cv11";
  }

  /* Scrollbar neumorphic */
  ::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }

  ::-webkit-scrollbar-track {
    background: var(--neu-bg);
    box-shadow: inset 2px 2px 4px var(--neu-shadow-dark),
                inset -2px -2px 4px var(--neu-shadow-light);
    border-radius: 10px;
  }

  ::-webkit-scrollbar-thumb {
    background: var(--neu-bg);
    box-shadow: 2px 2px 4px var(--neu-shadow-dark),
                -2px -2px 4px var(--neu-shadow-light);
    border-radius: 10px;
  }

  ::-webkit-scrollbar-thumb:hover {
    box-shadow: 3px 3px 6px var(--neu-shadow-dark),
                -3px -3px 6px var(--neu-shadow-light);
  }
}

@layer components {
  /* ============================================
     NEUMORPHISM - COMPONENTES BASE
     ============================================ */

  /* Neu Card - Raised (elevado) */
  .neu {
    @apply relative rounded-neu;
    background: var(--neu-bg);
    box-shadow: 6px 6px 12px var(--neu-shadow-dark),
                -6px -6px 12px var(--neu-shadow-light);
    transition: all 0.2s ease;
  }

  /* Neu Card - Small */
  .neu-sm {
    @apply relative rounded-neu-sm;
    background: var(--neu-bg);
    box-shadow: 3px 3px 6px var(--neu-shadow-dark),
                -3px -3px 6px var(--neu-shadow-light);
  }

  /* Neu Card - Large */
  .neu-lg {
    @apply relative rounded-neu-lg;
    background: var(--neu-bg);
    box-shadow: 12px 12px 24px var(--neu-shadow-dark),
                -12px -12px 24px var(--neu-shadow-light);
  }

  /* Neu Card - Extra Large */
  .neu-xl {
    @apply relative rounded-neu-xl;
    background: var(--neu-bg);
    box-shadow: 20px 20px 40px var(--neu-shadow-dark),
                -20px -20px 40px var(--neu-shadow-light);
  }

  /* Neu Inset (hundido) */
  .neu-inset {
    @apply relative rounded-neu;
    background: var(--neu-bg);
    box-shadow: inset 4px 4px 8px var(--neu-shadow-dark),
                inset -4px -4px 8px var(--neu-shadow-light);
  }

  .neu-inset-sm {
    @apply relative rounded-neu-sm;
    background: var(--neu-bg);
    box-shadow: inset 3px 3px 6px var(--neu-shadow-dark),
                inset -3px -3px 6px var(--neu-shadow-light);
  }

  /* Neu Flat (plano con sombras suaves) */
  .neu-flat {
    @apply relative rounded-neu;
    background: var(--neu-bg);
    box-shadow: 4px 4px 8px var(--neu-shadow-dark),
                -4px -4px 8px var(--neu-shadow-light);
  }

  /* Neu Convex (abombado hacia afuera) */
  .neu-convex {
    @apply relative rounded-neu;
    background: linear-gradient(145deg, #f0f1f5, #d4d5da);
    box-shadow: 6px 6px 12px var(--neu-shadow-dark),
                -6px -6px 12px var(--neu-shadow-light);
  }

  .dark .neu-convex {
    background: linear-gradient(145deg, #333333, #272727);
  }

  /* Neu Concave (abombado hacia adentro) */
  .neu-concave {
    @apply relative rounded-neu;
    background: linear-gradient(145deg, #d4d5da, #f0f1f5);
    box-shadow: 6px 6px 12px var(--neu-shadow-dark),
                -6px -6px 12px var(--neu-shadow-light);
  }

  .dark .neu-concave {
    background: linear-gradient(145deg, #272727, #333333);
  }

  /* Neu Hover interactivo */
  .neu-hover {
    @apply neu cursor-pointer;
  }

  .neu-hover:hover {
    box-shadow: 8px 8px 16px var(--neu-shadow-dark),
                -8px -8px 16px var(--neu-shadow-light);
    transform: translateY(-2px);
  }

  .neu-hover:active {
    box-shadow: inset 4px 4px 8px var(--neu-shadow-dark),
                inset -4px -4px 8px var(--neu-shadow-light);
    transform: translateY(0);
  }

  /* ============================================
     BOTONES NEUMORPHISM
     ============================================ */

  .btn-neu {
    @apply neu-hover inline-flex items-center justify-center gap-2;
    @apply px-6 py-3 font-medium text-gray-600 rounded-neu-sm;
    @apply focus:outline-none focus:ring-2 focus:ring-primary-400 focus:ring-offset-2 focus:ring-offset-neu-bg;
    @apply disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none;
    transition: all 0.2s ease;
  }

  .btn-neu:hover {
    @apply text-gray-800;
  }

  .btn-neu:active {
    box-shadow: inset 3px 3px 6px var(--neu-shadow-dark),
                inset -3px -3px 6px var(--neu-shadow-light);
  }

  .btn-neu-primary {
    @apply btn-neu;
    @apply bg-primary-500 text-white;
    box-shadow: 4px 4px 8px var(--neu-shadow-dark),
                -4px -4px 8px var(--neu-shadow-light),
                0 0 0 transparent;
  }

  .btn-neu-primary:hover {
    @apply bg-primary-600 text-white;
    box-shadow: 6px 6px 12px var(--neu-shadow-dark),
                -6px -6px 12px var(--neu-shadow-light),
                0 0 20px rgba(59, 130, 246, 0.3);
  }

  .btn-neu-primary:active {
    box-shadow: inset 3px 3px 6px rgba(0, 0, 0, 0.2),
                inset -3px -3px 6px rgba(255, 255, 255, 0.1);
  }

  .btn-neu-secondary {
    @apply btn-neu;
    @apply bg-secondary-500 text-white;
  }

  .btn-neu-secondary:hover {
    @apply bg-secondary-600;
    box-shadow: 6px 6px 12px var(--neu-shadow-dark),
                -6px -6px 12px var(--neu-shadow-light),
                0 0 20px rgba(14, 165, 233, 0.3);
  }

  .btn-neu-danger {
    @apply btn-neu;
    @apply bg-error text-white;
  }

  .btn-neu-danger:hover {
    box-shadow: 6px 6px 12px var(--neu-shadow-dark),
                -6px -6px 12px var(--neu-shadow-light),
                0 0 20px rgba(239, 68, 68, 0.3);
  }

  .btn-neu-ghost {
    @apply btn-neu;
    background: transparent;
    box-shadow: none;
  }

  .btn-neu-ghost:hover {
    background: var(--neu-bg);
    box-shadow: 4px 4px 8px var(--neu-shadow-dark),
                -4px -4px 8px var(--neu-shadow-light);
  }

  .btn-neu-icon {
    @apply neu-hover p-3 rounded-full;
    @apply text-gray-600;
    @apply focus:outline-none focus:ring-2 focus:ring-primary-400;
  }

  .btn-neu-icon:active {
    box-shadow: inset 2px 2px 4px var(--neu-shadow-dark),
                inset -2px -2px 4px var(--neu-shadow-light);
  }

  /* ============================================
     INPUTS NEUMORPHISM
     ============================================ */

  .input-neu {
    @apply w-full px-4 py-3 rounded-neu-sm;
    background: var(--neu-bg);
    box-shadow: inset 4px 4px 8px var(--neu-shadow-dark),
                inset -4px -4px 8px var(--neu-shadow-light);
    @apply text-foreground placeholder:text-muted-foreground;
    @apply focus:outline-none;
    transition: all 0.2s ease;
  }

  .input-neu:focus {
    box-shadow: inset 6px 6px 12px var(--neu-shadow-dark),
                inset -6px -6px 12px var(--neu-shadow-light),
                0 0 0 2px rgba(59, 130, 246, 0.3);
  }

  .input-neu:disabled {
    @apply opacity-50 cursor-not-allowed;
  }

  .input-neu-label {
    @apply block text-sm font-medium text-foreground mb-2;
  }

  .input-neu-error {
    @apply input-neu;
    box-shadow: inset 4px 4px 8px var(--neu-shadow-dark),
                inset -4px -4px 8px var(--neu-shadow-light),
                0 0 0 2px rgba(239, 68, 68, 0.3);
  }

  /* Textarea */
  .textarea-neu {
    @apply input-neu min-h-[120px] resize-y;
  }

  /* Select */
  .select-neu {
    @apply input-neu appearance-none cursor-pointer;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.75rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    padding-right: 2.5rem;
  }

  /* ============================================
     CARDS NEUMORPHISM
     ============================================ */

  .card-neu {
    @apply neu p-6;
  }

  .card-neu-sm {
    @apply neu-sm p-4;
  }

  .card-neu-lg {
    @apply neu-lg p-8;
  }

  .card-neu-interactive {
    @apply neu-hover p-6;
  }

  /* ============================================
     NAVEGACIÓN NEUMORPHISM
     ============================================ */

  .nav-neu {
    @apply neu;
    @apply fixed top-4 left-1/2 -translate-x-1/2 z-50;
    @apply px-6 py-3 rounded-neu-full;
  }

  .sidebar-neu {
    @apply h-full overflow-y-auto;
    background: var(--neu-bg);
  }

  .nav-item-neu {
    @apply flex items-center gap-3 px-4 py-3 rounded-neu-sm;
    @apply text-muted-foreground;
    transition: all 0.2s ease;
  }

  .nav-item-neu:hover {
    @apply text-foreground;
    box-shadow: inset 3px 3px 6px var(--neu-shadow-dark),
                inset -3px -3px 6px var(--neu-shadow-light);
  }

  .nav-item-neu.active {
    @apply text-primary-600;
    box-shadow: inset 4px 4px 8px var(--neu-shadow-dark),
                inset -4px -4px 8px var(--neu-shadow-light);
    border-left: 3px solid theme('colors.primary.DEFAULT');
  }

  /* ============================================
     MODAL NEUMORPHISM
     ============================================ */

  .modal-overlay {
    @apply fixed inset-0 z-50;
    background: rgba(0, 0, 0, 0.4);
  }

  .modal-neu {
    @apply neu-lg p-8;
    @apply max-w-lg w-[90%] mx-auto;
    @apply animate-scale-in;
  }

  /* ============================================
     TABLAS NEUMORPHISM
     ============================================ */

  .table-neu {
    @apply w-full;
  }

  .table-neu thead {
    @apply neu-sm;
  }

  .table-neu th {
    @apply px-4 py-3 text-left text-sm font-semibold text-foreground;
  }

  .table-neu td {
    @apply px-4 py-3 text-sm text-foreground;
  }

  .table-neu tbody tr {
    @apply border-b;
    border-color: var(--neu-shadow-dark);
    transition: all 0.2s ease;
  }

  .table-neu tbody tr:hover {
    box-shadow: inset 0 2px 4px var(--neu-shadow-dark);
  }

  /* ============================================
     BADGES / ESTADOS
     ============================================ */

  .badge-neu {
    @apply inline-flex items-center px-3 py-1 rounded-full text-xs font-medium;
    background: var(--neu-bg);
    box-shadow: 2px 2px 4px var(--neu-shadow-dark),
                -2px -2px 4px var(--neu-shadow-light);
  }

  .badge-neu-success {
    @apply badge-neu text-success;
    box-shadow: 2px 2px 4px var(--neu-shadow-dark),
                -2px -2px 4px var(--neu-shadow-light),
                0 0 10px rgba(34, 197, 94, 0.2);
  }

  .badge-neu-warning {
    @apply badge-neu text-warning;
    box-shadow: 2px 2px 4px var(--neu-shadow-dark),
                -2px -2px 4px var(--neu-shadow-light),
                0 0 10px rgba(245, 158, 11, 0.2);
  }

  .badge-neu-error {
    @apply badge-neu text-error;
    box-shadow: 2px 2px 4px var(--neu-shadow-dark),
                -2px -2px 4px var(--neu-shadow-light),
                0 0 10px rgba(239, 68, 68, 0.2);
  }

  .badge-neu-info {
    @apply badge-neu text-info;
    box-shadow: 2px 2px 4px var(--neu-shadow-dark),
                -2px -2px 4px var(--neu-shadow-light),
                0 0 10px rgba(59, 130, 246, 0.2);
  }

  .badge-neu-neutral {
    @apply badge-neu text-muted-foreground;
  }

  /* ============================================
     AVATARES NEUMORPHISM
     ============================================ */

  .avatar-neu {
    @apply relative inline-flex items-center justify-center;
    @apply rounded-full overflow-hidden;
    @apply bg-gradient-to-br from-primary-400 to-secondary-400;
    box-shadow: 3px 3px 6px var(--neu-shadow-dark),
                -3px -3px 6px var(--neu-shadow-light);
  }

  .avatar-neu-sm {
    @apply avatar-neu w-8 h-8 text-sm;
  }

  .avatar-neu-md {
    @apply avatar-neu w-10 h-10 text-base;
  }

  .avatar-neu-lg {
    @apply avatar-neu w-16 h-16 text-xl;
  }

  /* ============================================
     ESTADÍSTICAS DASHBOARD
     ============================================ */

  .stat-card-neu {
    @apply neu p-6 flex flex-col;
  }

  .stat-card-neu-value {
    @apply text-3xl font-bold text-foreground;
  }

  .stat-card-neu-label {
    @apply text-sm text-muted-foreground mt-1;
  }

  .stat-card-neu-trend {
    @apply text-xs font-medium mt-2;
  }

  .stat-card-neu-trend.positive {
    @apply text-success;
  }

  .stat-card-neu-trend.negative {
    @apply text-error;
  }

  /* ============================================
     RATIO INDICATOR (DCF Florida)
     ============================================ */

  .ratio-indicator-neu {
    @apply neu p-4 rounded-neu-sm flex items-center gap-4;
  }

  .ratio-indicator-neu.compliant {
    box-shadow: 6px 6px 12px var(--neu-shadow-dark),
                -6px -6px 12px var(--neu-shadow-light),
                0 0 20px rgba(34, 197, 94, 0.2);
  }

  .ratio-indicator-neu.warning {
    box-shadow: 6px 6px 12px var(--neu-shadow-dark),
                -6px -6px 12px var(--neu-shadow-light),
                0 0 20px rgba(245, 158, 11, 0.2);
  }

  .ratio-indicator-neu.non-compliant {
    box-shadow: 6px 6px 12px var(--neu-shadow-dark),
                -6px -6px 12px var(--neu-shadow-light),
                0 0 20px rgba(239, 68, 68, 0.2);
  }

  /* ============================================
     TOOLTIPS
     ============================================ */

  .tooltip-neu {
    @apply neu-sm px-3 py-2 text-sm;
    @apply animate-fade-in;
  }

  /* ============================================
     TOAST / NOTIFICACIONES
     ============================================ */

  .toast-neu {
    @apply neu px-6 py-4;
    @apply flex items-center gap-3;
    @apply animate-slide-in-right;
  }

  .toast-neu.success {
    box-shadow: 6px 6px 12px var(--neu-shadow-dark),
                -6px -6px 12px var(--neu-shadow-light),
                inset 0 0 0 2px rgba(34, 197, 94, 0.3);
  }

  .toast-neu.error {
    box-shadow: 6px 6px 12px var(--neu-shadow-dark),
                -6px -6px 12px var(--neu-shadow-light),
                inset 0 0 0 2px rgba(239, 68, 68, 0.3);
  }

  .toast-neu.warning {
    box-shadow: 6px 6px 12px var(--neu-shadow-dark),
                -6px -6px 12px var(--neu-shadow-light),
                inset 0 0 0 2px rgba(245, 158, 11, 0.3);
  }

  .toast-neu.info {
    box-shadow: 6px 6px 12px var(--neu-shadow-dark),
                -6px -6px 12px var(--neu-shadow-light),
                inset 0 0 0 2px rgba(59, 130, 246, 0.3);
  }

  /* ============================================
     TOGGLE SWITCH NEUMORPHISM
     ============================================ */

  .toggle-neu {
    @apply relative w-14 h-7 rounded-full cursor-pointer;
    background: var(--neu-bg);
    box-shadow: inset 3px 3px 6px var(--neu-shadow-dark),
                inset -3px -3px 6px var(--neu-shadow-light);
  }

  .toggle-neu-knob {
    @apply absolute top-1 left-1 w-5 h-5 rounded-full;
    background: var(--neu-bg);
    box-shadow: 2px 2px 4px var(--neu-shadow-dark),
                -2px -2px 4px var(--neu-shadow-light);
    transition: transform 0.2s ease;
  }

  .toggle-neu.active .toggle-neu-knob {
    transform: translateX(28px);
    @apply bg-primary-500;
  }

  /* ============================================
     PROGRESS BAR NEUMORPHISM
     ============================================ */

  .progress-neu {
    @apply w-full h-3 rounded-full;
    background: var(--neu-bg);
    box-shadow: inset 2px 2px 4px var(--neu-shadow-dark),
                inset -2px -2px 4px var(--neu-shadow-light);
    overflow: hidden;
  }

  .progress-neu-bar {
    @apply h-full rounded-full;
    @apply bg-gradient-to-r from-primary-400 to-primary-600;
  }

  /* ============================================
     DIVIDER NEUMORPHISM
     ============================================ */

  .divider-neu {
    @apply h-px my-4;
    background: linear-gradient(90deg,
      transparent 0%,
      var(--neu-shadow-dark) 20%,
      var(--neu-shadow-dark) 80%,
      transparent 100%);
  }

  /* ============================================
     BACKWARD COMPATIBILITY - Glass aliases
     (Para mantener compatibilidad con código existente)
     ============================================ */
  .glass { @apply neu; }
  .glass-clear { @apply neu-sm; }
  .glass-frosted { @apply neu-lg; }
  .glass-mist { @apply neu-flat; }
  .glass-hover { @apply neu-hover; }
  .glass-specular { @apply neu-convex; }

  .btn-glass { @apply btn-neu; }
  .btn-glass-primary { @apply btn-neu-primary; }
  .btn-glass-secondary { @apply btn-neu-secondary; }
  .btn-glass-danger { @apply btn-neu-danger; }
  .btn-glass-icon { @apply btn-neu-icon; }

  .input-glass { @apply input-neu; }
  .input-glass-label { @apply input-neu-label; }
  .input-glass-error { @apply input-neu-error; }

  .card-glass { @apply card-neu; }
  .card-glass-sm { @apply card-neu-sm; }
  .card-glass-lg { @apply card-neu-lg; }
  .card-glass-interactive { @apply card-neu-interactive; }

  .nav-glass { @apply nav-neu; }
  .sidebar-glass { @apply sidebar-neu; }
  .nav-item-glass { @apply nav-item-neu; }

  .modal-glass { @apply modal-neu; }
  .table-glass { @apply table-neu; }

  .badge-glass { @apply badge-neu; }
  .badge-glass-success { @apply badge-neu-success; }
  .badge-glass-warning { @apply badge-neu-warning; }
  .badge-glass-error { @apply badge-neu-error; }
  .badge-glass-info { @apply badge-neu-info; }
  .badge-glass-neutral { @apply badge-neu-neutral; }

  .avatar-glass { @apply avatar-neu; }
  .avatar-glass-sm { @apply avatar-neu-sm; }
  .avatar-glass-md { @apply avatar-neu-md; }
  .avatar-glass-lg { @apply avatar-neu-lg; }

  .stat-card-glass { @apply stat-card-neu; }
  .stat-card-glass-value { @apply stat-card-neu-value; }
  .stat-card-glass-label { @apply stat-card-neu-label; }
  .stat-card-glass-trend { @apply stat-card-neu-trend; }

  .ratio-indicator { @apply ratio-indicator-neu; }

  .tooltip-glass { @apply tooltip-neu; }
  .toast-glass { @apply toast-neu; }

  /* Glass border radius aliases */
  .rounded-glass { @apply rounded-neu; }
  .rounded-glass-sm { @apply rounded-neu-sm; }
  .rounded-glass-lg { @apply rounded-neu-lg; }
  .rounded-glass-xl { @apply rounded-neu-xl; }
  .rounded-glass-full { @apply rounded-neu-full; }
}

@layer utilities {
  /* ============================================
     UTILIDADES ADICIONALES
     ============================================ */

  /* Texto con gradiente */
  .text-gradient {
    @apply bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent;
  }

  /* Divisor con gradiente */
  .divider-gradient {
    @apply h-px bg-gradient-to-r from-transparent via-border to-transparent;
  }

  /* Safe area para dispositivos con notch */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Viewport dinámico para iOS */
  .min-h-dvh {
    min-height: 100dvh;
  }

  /* Desactivar animaciones si el usuario lo prefiere */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Alto contraste - mejorar visibilidad */
  @media (prefers-contrast: high) {
    .neu,
    .neu-sm,
    .neu-lg,
    .neu-hover {
      box-shadow: 8px 8px 16px var(--neu-shadow-dark),
                  -8px -8px 16px var(--neu-shadow-light),
                  inset 0 0 0 1px rgba(0, 0, 0, 0.1);
    }
  }
}
